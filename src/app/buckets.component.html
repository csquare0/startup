<div class="card" *ngIf="isLoading">
  <h4 class="card-header">Loading...</h4>
  <div class="card-block text-xs-center">
    <i class="fa fa-circle-o-notch fa-spin fa-3x"></i>
  </div>
</div>

<div *ngIf="!isLoading">
    <div>
        <br>
        <input [(ngModel)]="newBucketName" placeholder="name" />
        <button (click)="addBucket()"><span class="fa fa-file"></span>&nbsp;&nbsp;Add Bucket</button>
    </div>
    <div>
        <h4>Bucket List ({{buckets.length}})</h4>
        <table class="table table-bordered table-striped">
            <colgroup>
                <col width="40%" />
                <col width="35%" />
                <col width="15%" />
                <col width="10%" />
            </colgroup>
            <thead class="thead-default">
                <tr>
                    <th>Name</th>
                    <th>CreateDate</th>
                    <th>Policy</th>
                    <th>Objects</th>
                </tr>
            </thead>
            <tbody *ngIf="buckets.length === 0">
                <tr>
                    <td colspan="4">There are no buckets.</td>
                </tr>  
            </tbody>
            <tbody *ngIf="buckets.length !== 0">
                <tr *ngFor="let bucket of buckets">
                    <td>{{bucket.bucketKey}}</td>
                    <td>{{bucket.createdDate}}</td>
                    <td>{{bucket.policyKey}}</td>
                    <td><button (click)="showObjects(bucket.bucketKey)"><span class="fa fa-list"></span></button></td>
                </tr> 
            </tbody>
        </table>
    </div>
</div>


<div *ngIf="showObjectsPanel">
    <div>
        <h4>Object List in {{curBucketKey}} ({{objects.length}})</h4>
        <table class="table table-bordered table-striped">
            <thead class="thead-default">
                <tr>
                    <th>Object Key</th>
                    <th>Object Id</th>
                    <th>Size</th>
                    <th>Location</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody *ngIf="objects.length === 0">
                <tr>
                    <td colspan="4">There are no objects.</td>
                </tr>  
            </tbody>
            <tbody *ngIf="objects.length !== 0">
                <tr *ngFor="let object of objects">
                    <td>{{object.objectKey}}</td>
                    <td>{{object.objectId}}</td>
                    <td>{{object.size}}</td>
                    <td>{{object.location}}</td>
                    <td *ngIf="object.status===0"><button (click)="registerScene(object)"><span title= "Register" class="fa fa-plus"></span></button></td>
                    <td *ngIf="object.status===1"><span title="Translating" class="fa fa-circle-o-notch fa-spin fa-1x"></span></td>
                    <td *ngIf="object.status===2"><button (click)="showViews(object)"><span title= "Show Views" class="fa fa-list"></span></button></td>
                    <td *ngIf="object.status===3"><span title="Translation Error" class="fa fa-exclamation" style="color:red"></span></td>
                </tr> 
            </tbody>
        </table>
    </div>
</div>


<div *ngIf="showViewsPanel">
    <div>
        <h4>Named View List in {{curSceneId}} ({{views.length}})</h4>
        <table class="table table-bordered table-striped">
            <thead class="thead-default">
                <tr>
                    <th>Named View</th>
                    <th>Status</th>
                    <th>Render ID</th>
                    <th>Action</th>
                    <th>Error</th>
                </tr>
            </thead>
            <tbody *ngIf="views.length === 0">
                <tr>
                    <td colspan="4">There are no named views.</td>
                </tr>  
            </tbody>
            <tbody *ngIf="views.length !== 0">
                <tr *ngFor="let view of views">
                    <td>{{view.name}}</td>
                    <td>{{view.status}}</td>
                    <td>{{view.renderId}}</td>
                    <td *ngIf="object.status===0"><button (click)="renderScene(view)"><span title= "Render" class="fa fa-play"></span></button></td>
                    <td *ngIf="object.status===1"><span title="Rendering" class="fa fa-circle-o-notch fa-spin fa-1x"></span></td>
                    <td *ngIf="object.status===2"><span title= "Open Render" class="fa fa-image"></span></td>
                    <td *ngIf="object.status===3"><span title="Render Error" class="fa fa-exclamation" style="color:red"></span></td>
                    <td>{{view.errormsg}}</td>
                </tr> 
            </tbody>
        </table>
    </div>
</div>